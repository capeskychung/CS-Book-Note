<!DOCTYPE html>
<html>
<head>
<title>亿级流量网站架构核心技术</title>
<meta charset = "utf-8"/>
<style>body{margin: 50px 20px;color: #333;font-family: SourceSansPro,-apple-system,BlinkMacSystemFont,'PingFang SC',Helvetica,Arial,'Microsoft YaHei',Heiti,sans-serif,SimSun,serif}ul{list-style:disc outside; padding-bottom: 4px;}li{line-height: 27px; list-style: disc;font-size:19px;padding: 2px 0px;}blockquote p {color: #252525;font-family: 'EB Garamond', serif;font-size: 24px;}blockquote {background-color: #dce7e7 !important;border-left: 5px solid #219895 !important;margin: 2px 0 !important;padding: 1px 0px 1px 0px;}img{max-width:1024px;padding: 5px 0px;}.annot{padding: 15px 0px;border-bottom-style:solid;}.tag{color:blue;font-size:15px;}</style></head>
<body>
<div style="font-size: 22px; padding: 0 15px 0; ">
<div style = "padding-bottom: 0px"><h2>亿级流量网站架构核心技术</h2></div>
<div style = "background: #e5e6e8; height: 1px; margin-bottom: 20px;"></div>
</div>
<ul><li><h3>概述</h3><blockquote><img src = "亿级流量网站架构核心技术/c2e6a675c1188d59bfa4e0a1da0b0b83.png"></blockquote><ul><li><h3>1 交易型系统设计的一些原则</h3><blockquote><img src = "亿级流量网站架构核心技术/0825bbe67453f995f3043265540971bb.png"></blockquote><ul><li><h3>墨菲定律</h3><blockquote><img src = "亿级流量网站架构核心技术/d82119a644bd659866c43fed5b3fff0c.png"></blockquote></li><li><h3>康威定律</h3><blockquote><img src = "亿级流量网站架构核心技术/184c82368ce4f130f007951a2da7608f.png"></blockquote></li><li><h3>1.1 高并发原则</h3><blockquote><img src = "亿级流量网站架构核心技术/d66d3c0381afc63176b5edad9ba7a5f2.png"></blockquote><ul><li><h3>1.1.1 无状态</h3><blockquote><img src = "亿级流量网站架构核心技术/59886bfabf6281126f2839b67c568626.png"></blockquote></li><li><h3>1.1.2 拆分</h3><blockquote><img src = "亿级流量网站架构核心技术/8f019f54c09e11a643c2382c2d102a7e.png"></blockquote></li><li><h3>1.1.3 服务化</h3><blockquote><img src = "亿级流量网站架构核心技术/140d24412e4e88e62cdc551714b0c69e.png"></blockquote></li><li><h3>1.1.4 消息队列</h3><blockquote><img src = "亿级流量网站架构核心技术/c7dd2ff53063d769b755032e74e62a12.png"></blockquote><ul><li><h3>大流量缓冲</h3><blockquote><img src = "亿级流量网站架构核心技术/f3a6a25072d8c8c7ad089fd56624cb18.png"></blockquote></li><li><h3>2 数据校对</h3><blockquote><img src = "亿级流量网站架构核心技术/25211746a8345a969807a4f690cffb3c.png"></blockquote></li></ul>
</li><li><h3>1.1.5 数据异构</h3><blockquote><img src = "亿级流量网站架构核心技术/208257e5d49936ffaeb3836265bb76b2.png"></blockquote><ul><li><h3>数据异构</h3><blockquote><img src = "亿级流量网站架构核心技术/1320483da7f7685adbc0e4fb22078a10.png"></blockquote></li><li><h3>数据闭环</h3><blockquote><img src = "亿级流量网站架构核心技术/55ad81992fae3a33dc930d9ced417d6f.png"></blockquote></li></ul>
</li><li><h3>1.1.6 缓存银弹</h3><blockquote><img src = "亿级流量网站架构核心技术/f0bdb994f9524e6648e936b6c502b86e.png"></blockquote><ul><li><h3>浏览器缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/749abb4f7aefaad46f78eb185c13e14f.png"></blockquote></li><li><h3>APP客户端缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/43ec48f43a95c69ea80a994b017d185b.png"></blockquote></li><li><h3>CDN缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/de6ffdcbbb42ad9c3d24d5e4c68ea8f0.png"></blockquote></li><li><h3>接入缓存层</h3><blockquote><img src = "亿级流量网站架构核心技术/733a3091b111b7bb53ae00a34125b921.png"></blockquote></li><li><h3>应用层缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/6faf97ccdce0ba3449ca9e099e8a8dac.png"></blockquote></li><li><h3>分布式缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/437e9ae4352a5ff15863a5478f8b1989.png"></blockquote></li></ul>
</li><li><h3>1.1.7 并发化</h3><blockquote><img src = "亿级流量网站架构核心技术/6a51378a8dbaba8b5004a731fbdf7152.png"></blockquote></li></ul>
</li><li><h3>1.2 高可用原则</h3><blockquote><img src = "亿级流量网站架构核心技术/a87ac379cbff6e47f5fedc3dd8ca6fe6.png"></blockquote><ul><li><h3>1.2.1 降级</h3><blockquote><img src = "亿级流量网站架构核心技术/ca8ca45d360e30fe002f0c6c5647c874.png"></blockquote></li><li><h3>1.2.2 限流</h3><blockquote><img src = "亿级流量网站架构核心技术/69037d2732a8acaaf049f9e7b2c2d33d.png"></blockquote></li><li><h3>1.2.3 切流量</h3><blockquote><img src = "亿级流量网站架构核心技术/3aafac6750c2ba00443cb5c959714461.png"></blockquote></li><li><h3>1.2.4 可回滚</h3><blockquote><img src = "亿级流量网站架构核心技术/5e061af6fada1eb05f75cb8aefeeedf4.png"></blockquote></li></ul>
</li><li><h3>1.3 业务设计原则</h3><blockquote><img src = "亿级流量网站架构核心技术/ac0de9647dac262d2b013c4433878015.png"></blockquote><ul><li><h3>1.3.1 防重设计</h3><blockquote><img src = "亿级流量网站架构核心技术/101864e76ea4aa171d9157fea9a7e7b8.png"></blockquote></li><li><h3>1.3.2 幂等设计</h3><blockquote><img src = "亿级流量网站架构核心技术/78ffb3c6219c606e91783c6a3b790ad1.png"></blockquote></li><li><h3>1.3.3 流程可定义</h3><blockquote><img src = "亿级流量网站架构核心技术/7117572f2cab4905ca053e3e0e2b5494.png"></blockquote></li><li><h3>1.3.4 状态与状态机</h3><blockquote><img src = "亿级流量网站架构核心技术/29a9a565a77837d18764172587a4fc3f.png"></blockquote></li><li><h3>1.3.5 后台系统操作可反馈</h3><blockquote><img src = "亿级流量网站架构核心技术/37dea84fd0adf4c74e80384dfc94927e.png"></blockquote></li><li><h3>1.3.6 后台系统审批化</h3><blockquote><img src = "亿级流量网站架构核心技术/cccd9912ca524102d775a136243d9412.png"></blockquote></li><li><h3>1.3.7 文档和注释</h3><blockquote><img src = "亿级流量网站架构核心技术/32b5b13cc0b5ee95125076f78092e466.png"></blockquote></li><li><h3>1.3.8 备份</h3><blockquote><img src = "亿级流量网站架构核心技术/a3c7e75af915ffd2620b8f8da297e244.png"></blockquote></li></ul>
</li><li><h3>1.4 总结</h3><blockquote><img src = "亿级流量网站架构核心技术/fb34eaed1215be4b1dd978126e6bc5b8.png"></blockquote></li></ul>
</li></ul>
</li><li><h3>高可用</h3><blockquote><img src = "亿级流量网站架构核心技术/740de3637560f3d5d3b78560e5f00f02.png"></blockquote><ul><li><h3>2 负载均衡与方向代理</h3><blockquote><img src = "亿级流量网站架构核心技术/024ec853e2d5720d069b9048a0ab448b.png"></blockquote><ul><li><h3> 高并发框架</h3><blockquote><img src = "亿级流量网站架构核心技术/41fb292dd8d5072c021adfc18b6c93ea.png"></blockquote></li><li><h3>2.1 upstream配置</h3><blockquote><img src = "亿级流量网站架构核心技术/b88bd5028450021edc6a937cddaf411a.png"></blockquote></li><li><h3>2.2 负载均衡算法</h3><blockquote><img src = "亿级流量网站架构核心技术/6ab0addbd6e821c23e27320c0dd4109e.png"></blockquote></li><li><h3>2.3 失败重试</h3><blockquote><img src = "亿级流量网站架构核心技术/cd979b7d9b65db83f75e6ca28a2a6356.png"></blockquote></li><li><h3>2.4 健康检查</h3><blockquote><img src = "亿级流量网站架构核心技术/cf0911d4a4ae0d9930f80be4f181c085.png"></blockquote><ul><li><h3>2.4.1 TCP心跳检查</h3><blockquote><img src = "亿级流量网站架构核心技术/1700191fd8c071cfd7e25d62faac8555.png"></blockquote></li><li><h3>2.4.2 HTTP心跳检查</h3><blockquote><img src = "亿级流量网站架构核心技术/a637101705461a3300bd701132ecbdb6.png"></blockquote></li></ul>
</li><li><h3>2.5 其他配置</h3><blockquote><img src = "亿级流量网站架构核心技术/c13e75b6b6cdad692c2053fb406c8c26.png"></blockquote><ul><li><h3>2.5.1 域名上游服务器</h3><blockquote><img src = "亿级流量网站架构核心技术/7455db9cedcfea65e631043c9fb6e472.png"></blockquote></li><li><h3>2.5.2 备份上有服务器</h3><blockquote><img src = "亿级流量网站架构核心技术/de30c177630e627ab78c08bd2cff2f50.png"></blockquote></li><li><h3>2.5.3 不可用上有服务器</h3><blockquote><img src = "亿级流量网站架构核心技术/3b8deb385c977e7b7feafbc708ff9c52.png"></blockquote></li></ul>
</li><li><h3>2.6 长连接</h3><blockquote><img src = "亿级流量网站架构核心技术/2a86e2d29c46ad91e3f100d5b26474bf.png"></blockquote></li><li><h3>2.7 HTTP反向代理示例</h3><blockquote><img src = "亿级流量网站架构核心技术/136b08db79fa87ae84cfb496408e221e.png"></blockquote><ul><li><h3>1. 全局配置 proxy cache</h3><blockquote><img src = "亿级流量网站架构核心技术/39c11ed565d0ad45f4a0857bdab31f85.png"></blockquote></li><li><h3>2. location配置</h3><blockquote><img src = "亿级流量网站架构核心技术/f61f8ed079310119067b20a9c9b0fcdf.png"></blockquote></li></ul>
</li><li><h3>2.8 HTTP 动态负载均衡</h3><blockquote><img src = "亿级流量网站架构核心技术/82951741b7415ebdb9235ba0849b9662.png"></blockquote><ul><li><h3>2.8.1 Consul+Consul-template</h3><blockquote><img src = "亿级流量网站架构核心技术/55b29a6d0ecbd27c9cc68967f1d31172.png"></blockquote><ul><li><h3>1 Consul-Server</h3><blockquote><img src = "亿级流量网站架构核心技术/d99507d49f38510f6d9eea18beadb09a.png"></blockquote></li><li><h3>2 Consul-template</h3><blockquote><img src = "亿级流量网站架构核心技术/966f905969c5bf96821b6fb403a302a3.png"></blockquote></li></ul>
</li><li><h3>2.8.2 Consul+OpenResty</h3><blockquote><img src = "亿级流量网站架构核心技术/02b04d37421333a0c9628c89f27f3be6.png"></blockquote></li></ul>
</li><li><h3>2.9 Nginx四层负载均衡</h3><blockquote><img src = "亿级流量网站架构核心技术/7976ec64236fe034bb4f84c471cc71ea.png"></blockquote><ul><li><h3>2.9.1 静态负载均衡</h3><blockquote><img src = "亿级流量网站架构核心技术/0a0c765728a7ffc8ee038f019eafb13c.png"></blockquote><ul><li><h3>1 stream指令</h3><blockquote><img src = "亿级流量网站架构核心技术/b10c11a3010b5da5af85b3034a860c10.png"></blockquote></li><li><h3>2 upstream配置</h3><blockquote><img src = "亿级流量网站架构核心技术/eaa3b30b57b2eaf3dc4e4dcff77dca44.png"></blockquote></li><li><h3>3 server配置</h3><blockquote><img src = "亿级流量网站架构核心技术/a4d2cab13926060a98eb6334d0e72654.png"></blockquote></li></ul>
</li><li><h3>2.9.2 动态负载均衡</h3><blockquote><img src = "亿级流量网站架构核心技术/8282b0383d7c3561b0627027aa951a64.png"></blockquote><ul><li><h3>1 upstream配置</h3><blockquote><img src = "亿级流量网站架构核心技术/aab677ebca097c911f12fc02dcd138d6.png"></blockquote></li><li><h3>2 从Consul添加上游服务器</h3><blockquote><img src = "亿级流量网站架构核心技术/2ffd2b3a1474f03c8ade548e83e57fc5.png"></blockquote></li><li><h3>3 从Consul删除上游服务器</h3><blockquote><img src = "亿级流量网站架构核心技术/0767654a2a109668135bb44a0cfd7b20.png"></blockquote></li><li><h3>4 upstream_show</h3><blockquote><img src = "亿级流量网站架构核心技术/e8877567dfb9b4600838bebedc058982.png"></blockquote></li></ul>
</li></ul>
</li></ul>
</li><li><h3>3 隔离术</h3><blockquote><img src = "亿级流量网站架构核心技术/5e330ce1bf6dd410dcb92b69c15c30ef.png"></blockquote><ul><li><h3>3.1 线程隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/d9d03f502b8dc797ff79c44da755a573.png"></blockquote></li><li><h3>3.2 进程隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/37cb28039c2f0a3f38fb6c163347d983.png"></blockquote></li><li><h3>3.3 集群隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/c7e4f549a92c3d081beff1d487a5255c.png"></blockquote></li><li><h3>3.4 机房隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/e78032e934c87871e0cd1890a2267baa.png"></blockquote></li><li><h3>3.5 读写隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/a2fa1fc63733e1e43a086d4a1aa64995.png"></blockquote></li><li><h3>3.6 动静隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/d8d166926fea4aff362addd3582bcbc1.png"></blockquote></li><li><h3>3.7 爬虫隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/6f279f1952b763a6b3b3e6736f27248c.png"></blockquote></li><li><h3>3.8 热点隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/b43df451c5d21a8d1f89dc00c8b27f73.png"></blockquote></li><li><h3>3.9 资源隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/f34175c1dedc9e59a1dddba38ed6a387.png"></blockquote></li><li><h3>3.10 使用Hystrix实现隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/7700211fc9564fed27dadd43c351da95.png"></blockquote><ul><li><h3>3.10.1 Hystrix简介</h3><blockquote><img src = "亿级流量网站架构核心技术/35949f9aaad4bcd8f72270b1a4299bd4.png"></blockquote></li><li><h3>3.10.2 隔离示例</h3><blockquote><img src = "亿级流量网站架构核心技术/50d78d99b110b0231684061f365481f4.png"></blockquote></li></ul>
</li><li><h3>3.11 基于Servlet3 实现请求隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/2592ed8bde5d6b211aee563b19143160.png"></blockquote><ul><li><h3>3.11.1 请求解析和业务 处理线程池分离</h3><blockquote><img src = "亿级流量网站架构核心技术/457c4835d67b3c7f6e934982ca419fc4.png"></blockquote></li><li><h3>3.11.2 业务线程池隔离</h3><blockquote><img src = "亿级流量网站架构核心技术/78a6d101f63b9d718bf3179be1219d4d.png"></blockquote></li><li><h3>3.11.3 业务线程池监控/运维/降级</h3><blockquote><img src = "亿级流量网站架构核心技术/01011efc3edc3ada8af7b1a5f8978545.png"></blockquote></li><li><h3>3.11.4 如何使用Servlet3异步化</h3><blockquote><img src = "亿级流量网站架构核心技术/97422352831bdfe7fff8a8be22cb00b6.png"></blockquote></li><li><h3>3.11.5 一些Servlet3异步化压测数据</h3><blockquote><img src = "亿级流量网站架构核心技术/65c41571973d83e402f711f6ba9683ce.png"></blockquote></li></ul>
</li></ul>
</li><li><h3>4 限流详解</h3><blockquote><img src = "亿级流量网站架构核心技术/3c12fd9a2d79d349b7c6d78e6d5cf49d.png"></blockquote><ul><li><h3>4.1 限流算法</h3><blockquote><img src = "亿级流量网站架构核心技术/a394922b4e8d7e2dae1e1782af64098b.png"></blockquote><ul><li><h3>4.1.1 令牌桶算法</h3><blockquote><img src = "亿级流量网站架构核心技术/867ad1d3b74cf60b507e1a6545553772.png"></blockquote></li><li><h3>4.1.2 漏桶算法</h3><blockquote><img src = "亿级流量网站架构核心技术/0dced09cb2b876c9791693e7a5a2267c.png"></blockquote></li></ul>
</li><li><h3>4.2 应用级限流</h3><blockquote><img src = "亿级流量网站架构核心技术/6635c22d3264c0886707556c84219507.png"></blockquote><ul><li><h3>4.2.1 限流总并发/连接/请求数</h3><blockquote><img src = "亿级流量网站架构核心技术/e6d04cd4222ad5aff56a9e261527ec4c.png"></blockquote></li><li><h3>4.2.2 限流总资源数</h3><blockquote><img src = "亿级流量网站架构核心技术/f3d32c08328ae14fc33e0407a9003b84.png"></blockquote></li><li><h3>4.2.3 限流某个接口的总并发/请求数</h3><blockquote><img src = "亿级流量网站架构核心技术/ed08fb51fb54568e23705cca53636354.png"></blockquote></li><li><h3>4.2.4 限流某个接口的时间窗请求数</h3><blockquote><img src = "亿级流量网站架构核心技术/f71d8e4ab923bbfeb38cd231e267bfc7.png"></blockquote></li><li><h3>4.2.5 平滑限流某个接口的请求数</h3><blockquote><img src = "亿级流量网站架构核心技术/b0406b4b16d574df94591a3dd24fa39c.png"></blockquote></li></ul>
</li><li><h3>4.3 分布式限流</h3><blockquote><img src = "亿级流量网站架构核心技术/bda9afa6d6dca9caf7315cc503fb1959.png"></blockquote></li><li><h3>4.4 接入层限流</h3><blockquote><img src = "亿级流量网站架构核心技术/4b0cddab2993922eb96b66943b0ac295.png"></blockquote></li><li><h3>4.5 节流</h3><blockquote><img src = "亿级流量网站架构核心技术/688b8d6dd3b37e36e9be58c106f1a035.png"></blockquote></li></ul>
</li><li><h3>5 降级特技</h3><blockquote><img src = "亿级流量网站架构核心技术/7ce3ac14286977ea3af2a078bd9b4258.png"></blockquote><ul><li><h3>5.1 降级预案</h3><blockquote><img src = "亿级流量网站架构核心技术/1ec3b47e532b57956b96c92c8f8b86c6.png"></blockquote></li><li><h3>5.2 自动开关降级</h3><blockquote><img src = "亿级流量网站架构核心技术/47e4e257c92035eab8a6926eba0ab0f1.png"></blockquote><ul><li><h3>5.2.1 超时降级</h3><blockquote><img src = "亿级流量网站架构核心技术/c3f55a82b2bedfae16da57166b5aee5a.png"></blockquote></li><li><h3>5.2.2 统计失败次数降级</h3><blockquote><img src = "亿级流量网站架构核心技术/691d554f0a3017ca6b10125fda1ceffe.png"></blockquote></li><li><h3>5.2.3 故障降级</h3><blockquote><img src = "亿级流量网站架构核心技术/693847c70e8282b19393b33af5affb27.png"></blockquote></li><li><h3>5.2.4 限流降级</h3><blockquote><img src = "亿级流量网站架构核心技术/b40775a2af2982c8bec71c5e3f78b0d7.png"></blockquote></li></ul>
</li><li><h3>5.3 人工开关降级</h3><blockquote><img src = "亿级流量网站架构核心技术/d52bac68048092f57eeb279bfbff8f27.png"></blockquote></li><li><h3>5.4 读服务降级</h3><blockquote><img src = "亿级流量网站架构核心技术/2d76b0c6f334c6f5b883f7c8aa49823a.png"></blockquote></li><li><h3>5.5 写服务降级</h3><blockquote><img src = "亿级流量网站架构核心技术/bf331bcf058d25548ee33602a08c35f5.png"></blockquote></li><li><h3>5.6 多级降级</h3><blockquote><img src = "亿级流量网站架构核心技术/12c218b800bd45eadcd66db053f9a41b.png"></blockquote></li><li><h3>5.7 配置中心</h3><blockquote><img src = "亿级流量网站架构核心技术/446ca4957d6f219bd07bac0d4040db51.png"></blockquote><ul><li><h3>5.7.1 应用层API封装</h3><blockquote><img src = "亿级流量网站架构核心技术/aff0fd034ff4b68f7c4444fdc5aec275.png"></blockquote></li><li><h3>5.7.2 使用配置文件实现开关配置</h3><blockquote><img src = "亿级流量网站架构核心技术/78a5f4d8b327992ae39896eb16952e94.png"></blockquote></li><li><h3>5.7.3 使用配置中心实现开关配置</h3><blockquote><img src = "亿级流量网站架构核心技术/590d596a7819a4896c6ee7dc5408862c.png"></blockquote></li></ul>
</li><li><h3>5.8 使用Hystrix实现降级</h3><blockquote><img src = "亿级流量网站架构核心技术/d8e9683b9593dc8956e44db275a4d66a.png"></blockquote></li><li><h3>5.9 使用Hystrix实现熔断</h3><blockquote><img src = "亿级流量网站架构核心技术/c760491a33522ca55bc2cf6aaaf4e971.png"></blockquote></li></ul>
</li><li><h3>6 超时与重试机制</h3><blockquote><img src = "亿级流量网站架构核心技术/f6c062eaccb0978b707f3c8ce583b465.png"></blockquote><ul><li><h3>6.1 简介</h3><blockquote><img src = "亿级流量网站架构核心技术/cb84c160c8406e54463557050b2140d6.png"></blockquote></li><li><h3>6.2 代理层超时与重试</h3><blockquote><img src = "亿级流量网站架构核心技术/3145e0e8f4bd49a83cf74e506c66c6a6.png"></blockquote><ul><li><h3>6.2.1 Nginx</h3><blockquote><img src = "亿级流量网站架构核心技术/c133fd864e679995814cf1f4c796ae30.png"></blockquote><ul><li><h3>1 客户端超时设置</h3><blockquote><img src = "亿级流量网站架构核心技术/287f60fac9de615ee78fab6e9461d9c0.png"></blockquote></li><li><h3>2 DNS解析超时设置</h3><blockquote><img src = "亿级流量网站架构核心技术/35ef812f9437177dabd64b9ee615b728.png"></blockquote></li><li><h3>3 代理超时设置</h3><blockquote><img src = "亿级流量网站架构核心技术/f6871ebeb991ed833b2aa559f2875e78.png"></blockquote></li></ul>
</li><li><h3>6.2.2 Twemproxy</h3><blockquote><img src = "亿级流量网站架构核心技术/e2b2acd36d677932a85b435d0606f2d2.png"></blockquote></li></ul>
</li><li><h3>6.3 Web容器超时</h3><blockquote><img src = "亿级流量网站架构核心技术/36b064db0288267ba26f527de2185762.png"></blockquote></li><li><h3>6.4 中间件客户端超时与重试</h3><blockquote><img src = "亿级流量网站架构核心技术/36fe293d2f4224ba2800403499ff7e06.png"></blockquote></li><li><h3>6.5 数据库客户端超时</h3><blockquote><img src = "亿级流量网站架构核心技术/6ff1a17185045355d4fbe23a883cf9e8.png"></blockquote></li><li><h3>6.6 NoAQSQL客户端超时</h3><blockquote><img src = "亿级流量网站架构核心技术/b6a4e2a5eb09c0abdafc90adcd94fb0e.png"></blockquote></li><li><h3>6.7 业务超时</h3><blockquote><img src = "亿级流量网站架构核心技术/4b7a01348d7f1b5aeb347be0d8f903ed.png"></blockquote></li><li><h3>6.8 前端Ajax超时</h3><blockquote><img src = "亿级流量网站架构核心技术/4b35f916ccd9b384c208522653cf8186.png"></blockquote></li><li><h3>6.9 总结</h3><blockquote><img src = "亿级流量网站架构核心技术/55ee1e02083b98322d7cb611e090b57d.png"></blockquote></li></ul>
</li><li><h3>7 回滚机制</h3><blockquote><img src = "亿级流量网站架构核心技术/ca0aca74ceca9ce8240530d03ccf22ec.png"></blockquote><ul><li><h3>7.1 事务回滚</h3><blockquote><img src = "亿级流量网站架构核心技术/7ad806f53ec7a468da4e04668a376702.png"></blockquote></li><li><h3>7.2 代码库回滚</h3><blockquote><img src = "亿级流量网站架构核心技术/ae73aab1833277e67b4ef18732aa9895.png"></blockquote></li><li><h3>7.3 部署版本回滚</h3><blockquote><img src = "亿级流量网站架构核心技术/c5f4102b569c45bf108f4202436278fa.png"></blockquote><ul><li><h3>1 部署版本化</h3><blockquote><img src = "亿级流量网站架构核心技术/2430317be60580df01f4337088f9a049.png"></blockquote></li><li><h3>2 小版本增量发布</h3><blockquote><img src = "亿级流量网站架构核心技术/80872f97507a30807925f1d8d585ca45.png"></blockquote></li><li><h3>3 大版本灰度发布</h3><blockquote><img src = "亿级流量网站架构核心技术/e6149c7b2d9d6d89564d4cbdd35bcaf2.png"></blockquote></li><li><h3>4 架构升级并发发布</h3><blockquote><img src = "亿级流量网站架构核心技术/069be04efa27e9bf2ab82a880643e662.png"></blockquote></li></ul>
</li><li><h3>7.4 数据版本回滚</h3><blockquote><img src = "亿级流量网站架构核心技术/d5282b655ba55a7b70da7df39b919985.png"></blockquote></li></ul>
</li><li><h3>8 压测与预案</h3><blockquote><img src = "亿级流量网站架构核心技术/34eb9a2348677aec71668f9f73558b37.png"></blockquote><ul><li><h3>8.1 系统压测</h3><blockquote><img src = "亿级流量网站架构核心技术/df6953243ba995402bb009fb3ebc5d78.png"></blockquote><ul><li><h3>8.1.1 线下压测</h3><blockquote><img src = "亿级流量网站架构核心技术/8b125717d885550f9d864eae390d05ff.png"></blockquote></li><li><h3>8.1.2 线上压测</h3><blockquote><img src = "亿级流量网站架构核心技术/59a183f7dda5b4239dd5bfc87e243be4.png"></blockquote></li></ul>
</li><li><h3>8.2 系统优化和容灾</h3><blockquote><img src = "亿级流量网站架构核心技术/86d4fdd249e7b74be38c465723f26175.png"></blockquote></li><li><h3>8.3 应急预案</h3><blockquote><img src = "亿级流量网站架构核心技术/af8f69f12e6f21fd96ab156c4cbca13b.png"></blockquote></li></ul>
</li></ul>
</li><li><h3>高并发</h3><blockquote><img src = "亿级流量网站架构核心技术/eb67bd393ce006acd56d8440f3d876aa.png"></blockquote><ul><li><h3>9 应用及缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/accd612d1897014b44b89bf4099642fe.png"></blockquote><ul><li><h3>9.1 缓存简介</h3><blockquote><img src = "亿级流量网站架构核心技术/27d5be258c6496399bbc0f4f14cbd909.png"></blockquote></li><li><h3>9.2 缓存命中率</h3><blockquote><img src = "亿级流量网站架构核心技术/d0d49e4485abc6afe9363e079fbf2902.png"></blockquote></li><li><h3>9.3 缓存回收策略</h3><blockquote><img src = "亿级流量网站架构核心技术/6c368c3e2fa00620a7633e1ba037062c.png"></blockquote></li><li><h3>9.4 Java缓存类型</h3><blockquote><img src = "亿级流量网站架构核心技术/a7e960a37c71494f5bdfbeca1c6793a4.png"></blockquote><ul><li><h3>9.4.1 堆缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/882d4c43caf26ecfd34237a59b25386e.png"></blockquote></li></ul>
</li><li><h3>9.6 缓存使用模式实践</h3><blockquote><img src = "亿级流量网站架构核心技术/d86f75df1718ad4af08905c535819488.png"></blockquote></li></ul>
</li><li><h3>10 HTTP缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/4eb0756911a27afde3c602b750e1034a.png"></blockquote><ul><li><h3>10.2 HTTP缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/cd69448b706f0d339dadc7f39543fe1d.png"></blockquote><ul><li><h3>10.2.1 Last-Modified</h3><blockquote><img src = "亿级流量网站架构核心技术/3d43b778c218417cdacc7a14cf1ae135.png"></blockquote><ul><li><h3>1 首次访问</h3><blockquote><img src = "亿级流量网站架构核心技术/16b4a68970d59c15f6868d1867af8d6a.png"></blockquote></li><li><h3>2 F5刷新</h3><blockquote><img src = "亿级流量网站架构核心技术/6ee7e8f173fa86cfaf8a51d7787dc1c9.png"></blockquote></li><li><h3>3 Ctrl+F5强制刷新</h3><blockquote><img src = "亿级流量网站架构核心技术/1d9a6b1a37bcf65af1275bd61299a8ad.png"></blockquote></li><li><h3>4 from cache</h3><blockquote><img src = "亿级流量网站架构核心技术/4fd6cb0c933688d32447a63a5fc1ecc0.png"></blockquote></li><li><h3>5 Age</h3><blockquote><img src = "亿级流量网站架构核心技术/442b5f08556e971fea469a755fb1f8e6.png"></blockquote></li><li><h3>6 Vary</h3><blockquote><img src = "亿级流量网站架构核心技术/920f95d6675c49d53760905de497e0a1.png"></blockquote></li><li><h3>7 Via</h3><blockquote><img src = "亿级流量网站架构核心技术/0c3e1a35acec352b613d11a61e547c6c.png"></blockquote></li></ul>
</li></ul>
</li><li><h3>10.6 一些经验</h3><blockquote><img src = "亿级流量网站架构核心技术/d17b262d42e5fcf8855592b90e7cb19d.png"></blockquote></li></ul>
</li><li><h3>11 多级缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/936a946bd30a69675707b323bf42dba6.png"></blockquote><ul><li><h3>11.2 如何缓存数据</h3><blockquote><img src = "亿级流量网站架构核心技术/4e99d753b3a48348f3289a582d7f87f1.png"></blockquote><ul><li><h3>11.2.1 过期与不过期</h3><blockquote><img src = "亿级流量网站架构核心技术/f2dce8eacbe7278daacfe9fea38b8ead.png"></blockquote></li><li><h3>11.2. 2 维度化缓存与增量缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/fe059e30b9236f3c1bb82b0a0c95d8e7.png"></blockquote></li><li><h3>11.2.3 大Value缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/8300e160e91876efa557687fcc9955b9.png"></blockquote></li><li><h3>11.2.4 热点缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/a8b33e912caa10471bcd42d394b8bce6.png"></blockquote></li></ul>
</li><li><h3>11.3 分布式缓存与应用负载均衡</h3><blockquote><img src = "亿级流量网站架构核心技术/18bbaf8d17a331a1d19ad7d7fe51012f.png"></blockquote><ul><li><h3>11.3.1 缓存分布式</h3><blockquote><img src = "亿级流量网站架构核心技术/6610a87940c96843ef6d232cfecda7fa.png"></blockquote></li><li><h3>11.3.2 应用负载均衡</h3><blockquote><img src = "亿级流量网站架构核心技术/8103bc9b7258bad8f14f0044c0108cb1.png"></blockquote><ul><li><h3>优缺点</h3><blockquote><img src = "亿级流量网站架构核心技术/66c4792c716835ea2728e34ab3b2545e.png"></blockquote></li></ul>
</li></ul>
</li><li><h3>11.4 热点数据与更新缓存</h3><blockquote><img src = "亿级流量网站架构核心技术/73c6906733f2bdac48dbae3b2b66275d.png"></blockquote><ul><li><h3>11.4.1 单机全量缓存+主从</h3><blockquote><img src = "亿级流量网站架构核心技术/313397a2a3fd445fc04d1bec46004d9a.png"></blockquote></li><li><h3>11.4.2 分布式缓存+应用本地热点</h3><blockquote><img src = "亿级流量网站架构核心技术/b75649366cd681ac6af6becc1ed91b4d.png"></blockquote></li></ul>
</li><li><h3>11.5 更新缓存与原子性</h3><blockquote><img src = "亿级流量网站架构核心技术/32f92ef47bb32e7e8bbbdc74920079d8.png"></blockquote></li><li><h3>11.6 缓存崩溃与快速修复</h3><blockquote><img src = "亿级流量网站架构核心技术/6d65826e1ab1ea6a19f1e723c3378b52.png"></blockquote></li></ul>
</li><li><h3>12 连接池线程池详解</h3><blockquote><img src = "亿级流量网站架构核心技术/2bb71d871fd1d340d4e4a48ebfce236f.png"></blockquote><ul><li><h3>12.3 线程池</h3><blockquote><img src = "亿级流量网站架构核心技术/be46ed077477f294435ac3f2c343a093.png"></blockquote><ul><li><h3>实现</h3><blockquote><img src = "亿级流量网站架构核心技术/a7eec885bd68c031d9ff600104dc07fb.png"></blockquote></li></ul>
</li><li><h3>docker中的坑</h3><blockquote><img src = "亿级流量网站架构核心技术/10b566caa73b64a1b2a6e14881299942.png"></blockquote></li></ul>
</li><li><h3>14 如何扩容</h3><blockquote><img src = "亿级流量网站架构核心技术/bc5ca4ca25b822bd7c04713838bda350.png"></blockquote><ul><li><h3>14.1 单体应用垂直扩容</h3><blockquote><img src = "亿级流量网站架构核心技术/601130ee35990fae2195ac6a5c6a5cae.png"></blockquote></li><li><h3>14.2 单体应用水平扩容</h3><blockquote><img src = "亿级流量网站架构核心技术/71e08c13f96c8be1606f8800e585add6.png"></blockquote></li><li><h3>14.3 应用拆分</h3><blockquote><img src = "亿级流量网站架构核心技术/5764ed7d30385de7ed46a8e789a648f0.png"></blockquote></li><li><h3>14.4 数据库拆分</h3><blockquote><img src = "亿级流量网站架构核心技术/bc672a67e77da17022fcd380d758b543.png"></blockquote><ul><li><h3>分库分表</h3><blockquote><img src = "亿级流量网站架构核心技术/d30b51d9e2668f33768c0142dc0137ed.png"></blockquote></li></ul>
</li><li><h3>14.5 数据库分库分表</h3><blockquote><img src = "亿级流量网站架构核心技术/bfda494bd15748794f40d5fdf8c5da54.png"></blockquote><ul><li><h3>14.5.1 应用层还是中间件层</h3><blockquote><img src = "亿级流量网站架构核心技术/07a1afa3c54c2af320351e2de8d64edb.png"></blockquote></li><li><h3>14.5.2 分库分表策略</h3><blockquote><img src = "亿级流量网站架构核心技术/088ffd6e287665614af63f0212b4a0b0.png"></blockquote><ul><li><h3>1 取模</h3><blockquote><img src = "亿级流量网站架构核心技术/2fc3ab639687b6e7d9199d2a4f6a5f92.png"></blockquote></li><li><h3>2 分区</h3><blockquote><img src = "亿级流量网站架构核心技术/8b2f943fe3f028b8a023b6468fd1bf84.png"></blockquote></li></ul>
</li><li><h3>14.5.3 使用sharding-jdbc分库分表</h3><blockquote><img src = "亿级流量网站架构核心技术/4279b6446d0ebbc50ce16cedb4b78eb5.png"></blockquote><ul><li><h3>1 数据库DDL</h3><blockquote><img src = "亿级流量网站架构核心技术/c85e1ba38af06d95ef61d569a54cc89b.png"></blockquote></li><li><h3>2 数据源配置</h3><blockquote><img src = "亿级流量网站架构核心技术/3163c7f72d2f68ac39be8bab4abc0040.png"></blockquote></li></ul>
</li></ul>
</li><li><h3>14.6 数据异构</h3><blockquote><img src = "亿级流量网站架构核心技术/efb247ac0e2bcae573aa5dca19ce5ab3.png"></blockquote><ul><li><h3>14.6.1 查询维度异构</h3><blockquote><img src = "亿级流量网站架构核心技术/2d9677567dc4c01c94829c09f1e9ba86.png"></blockquote></li><li><h3>14.6.2 聚合据异构</h3><blockquote><img src = "亿级流量网站架构核心技术/bd92357cbfb7bce370e60139d3890045.png"></blockquote></li></ul>
</li><li><h3>14.7 任务系统扩容</h3><blockquote><img src = "亿级流量网站架构核心技术/7cb50ef3520aa892eb6ceb9626181fda.png"></blockquote></li></ul>
</li><li><h3>15 队列术</h3><blockquote><img src = "亿级流量网站架构核心技术/96c0263b2c5fd243af849151f8e4c871.png"></blockquote><ul><li><h3>15.1 应用场景</h3><blockquote><img src = "亿级流量网站架构核心技术/33877eb39aac2c261d7e8b4e672f4338.png"></blockquote></li><li><h3>15.2 缓冲队列</h3><blockquote><img src = "亿级流量网站架构核心技术/56501e56835cc6e1453799ed58a7d862.png"></blockquote></li><li><h3>15.3 任务队列</h3><blockquote><img src = "亿级流量网站架构核心技术/e6bc7673510a5529efb49db67c4b2c3e.png"></blockquote></li><li><h3>15.4 消息队列</h3><blockquote><img src = "亿级流量网站架构核心技术/d16ca49796b9163c0525b2ac44d4da17.png"></blockquote></li><li><h3>15.5 请求队列</h3><blockquote><img src = "亿级流量网站架构核心技术/5222edca1cfa1da2dce6e7a1eb02d2d9.png"></blockquote></li><li><h3>15.6 数据总线队列</h3><blockquote><img src = "亿级流量网站架构核心技术/727f174823ced26595d6c6a759b01c2f.png"></blockquote></li><li><h3>15.7 消息队列</h3><blockquote><img src = "亿级流量网站架构核心技术/90891b401dfbb78bdd8259a90ba3628e.png"></blockquote></li><li><h3>15.8 其他队列</h3><blockquote><img src = "亿级流量网站架构核心技术/55bd27347ed9f371ee19e5c20f46cc0a.png"></blockquote></li><li><h3>15.9 Disruptor+Redis队列</h3><blockquote><img src = "亿级流量网站架构核心技术/96946e922f79af72c9450abc309ff2e8.png"></blockquote><ul><li><h3>15.9.1 简介</h3><blockquote><img src = "亿级流量网站架构核心技术/89c58d0fff39a4c68b67e11320d5688f.png"></blockquote></li></ul>
</li></ul>
</li></ul>
</li><li><h3>案例</h3><blockquote><img src = "亿级流量网站架构核心技术/36887f93ea3dd2dfb36cf79a04a027f2.png"></blockquote><ul><li><h3>16 构建需求响应式亿级商品详情页</h3><blockquote><img src = "亿级流量网站架构核心技术/c912ee1d0ebf5e4ddb39c32ffabe7f21.png"></blockquote></li></ul>
</li></ul>
<footer><div style = "background: #e5e6e8; height: 1px; margin-bottom: 20px;"></div>
<div style = "text-align:center; "><a target="_blank" href="http://www.bookxnote.com">&copy2018-2020 BookxNote</a></div></footer>
</body>
</html>
