<!DOCTYPE html>
<html>
<head>
<title>MongoDB运维实战</title>
<meta charset = "utf-8"/>
<style>body{margin: 50px 20px;color: #333;font-family: SourceSansPro,-apple-system,BlinkMacSystemFont,'PingFang SC',Helvetica,Arial,'Microsoft YaHei',Heiti,sans-serif,SimSun,serif}ul{list-style:disc outside; padding-bottom: 4px;}li{line-height: 27px; list-style: disc;font-size:19px;padding: 2px 0px;}blockquote p {color: #252525;font-family: 'EB Garamond', serif;font-size: 24px;}blockquote {background-color: #dce7e7 !important;border-left: 5px solid #219895 !important;margin: 2px 0 !important;padding: 1px 0px 1px 0px;}img{max-width:1024px;padding: 5px 0px;}.annot{padding: 15px 0px;border-bottom-style:solid;}.tag{color:blue;font-size:15px;}</style></head>
<body>
<div style="font-size: 22px; padding: 0 15px 0; ">
<div style = "padding-bottom: 0px"><h2>MongoDB运维实战</h2></div>
<div style = "background: #e5e6e8; height: 1px; margin-bottom: 20px;"></div>
</div>
<ul><li><h3>1 mongodb 3.4新特性</h3><blockquote><img src = "MongoDB运维实战/532f48fe7a95b88ce2f0a3aa277e941d.png"></blockquote><ul><li><h3>1.1 复制集</h3><blockquote><img src = "MongoDB运维实战/7c0c8ae974462e82ad32e2a944bf872f.png"></blockquote><ul><li><h3>Default Journaling Behavior of majority Write Concern</h3><blockquote><img src = "MongoDB运维实战/8b98ba8d55d2203a9ef1b315186fd1fd.png"></blockquote></li><li><h3>Adjustable Catchup Period for Newly Elected Primary</h3><blockquote><img src = "MongoDB运维实战/901d4a745ee0c20e56d35232bd5d5400.png"></blockquote></li><li><h3>支持 Linearizable Read Concern</h3><blockquote><img src = "MongoDB运维实战/6787f29e3f61886e9654c1d570e8b74c.png"></blockquote></li><li><h3>Improved Initial Sync</h3><blockquote><img src = "MongoDB运维实战/14d0e1ba90320c299215688dfcf0895a.png"></blockquote><ul><li><h3>参数</h3><blockquote><img src = "MongoDB运维实战/ea081707a6ebd1cb79f06da7c65baf97.png"></blockquote></li></ul>
</li><li><h3>Decimal Type</h3><blockquote><img src = "MongoDB运维实战/6f70aaa5513b909483626dd31c1ab91b.png"></blockquote></li><li><h3>Collation and Case-insensitive Indexes</h3><blockquote><img src = "MongoDB运维实战/ef256d200b0df3aed4843de488102a6f.png"></blockquote></li><li><h3>安全提升</h3><blockquote><img src = "MongoDB运维实战/31e812d3a8de2797daafe0e9ba001996.png"></blockquote></li><li><h3>工具</h3><blockquote><img src = "MongoDB运维实战/1a65f0e2ea2de822edbdeb8b818279af.png"></blockquote></li></ul>
</li><li><h3>1.2 分片集群</h3><blockquote><img src = "MongoDB运维实战/640ee8d00f58ef13ece910e4ed2990e0.png"></blockquote><ul><li><h3>Membership Awareness</h3><blockquote><img src = "MongoDB运维实战/3bb563b017f35ced1a06b7cc94a9e113.png"></blockquote></li><li><h3>Balancer on Config Server Primary</h3><blockquote><img src = "MongoDB运维实战/351b070d9f8a0f489f7280d6c8dd889e.png"></blockquote></li><li><h3>Faster Balancing</h3><blockquote><img src = "MongoDB运维实战/97022b8b2ba4d189b45499b65af169ba.png"></blockquote></li><li><h3>不在支持SCCC Config Server模式</h3><blockquote><img src = "MongoDB运维实战/3f88ec47be12d6cde8e13e0c5f335cce.png"></blockquote></li><li><h3>Sharding Zones</h3><blockquote><img src = "MongoDB运维实战/578ad4da235f61c29b63be4a50a06dd0.png"></blockquote></li></ul>
</li></ul>
</li><li><h3>2 mongodb 3.6新特性</h3><blockquote><img src = "MongoDB运维实战/6aa58ac204955437980ab95eec563d43.png"></blockquote><ul><li><h3>Default Bind to Localhost</h3><blockquote><img src = "MongoDB运维实战/c832dbb8051b79eff164105194da7210.png"></blockquote></li><li><h3>Authentication Restrictions</h3><blockquote><img src = "MongoDB运维实战/7715c7f817058b9d04e582b6f9f35586.png"></blockquote></li><li><h3>Change Streams</h3><blockquote><img src = "MongoDB运维实战/66ac5255ecb451d35795e53405af9ab6.png"></blockquote></li><li><h3>Causal Consistency</h3><blockquote><img src = "MongoDB运维实战/3a0e2a4855b5bfbfab54b480782ff5cb.png"></blockquote></li><li><h3>Retryable Writes</h3><blockquote><img src = "MongoDB运维实战/7c56098889ce51d272fe7ee604d5ec13.png"></blockquote></li><li><h3>serverStatus</h3><blockquote><img src = "MongoDB运维实战/804a9023edc60d5faf864fdf1919c5df.png"></blockquote></li><li><h3>2.1 复制集</h3><blockquote><img src = "MongoDB运维实战/743e7effce64192834b2e55cc0c02b24.png"></blockquote></li><li><h3>2.2 分片集群</h3><blockquote><img src = "MongoDB运维实战/adfa93c8de46ac22629d1d4e9dd4e7d0.png"></blockquote><ul><li><h3>listdatabase</h3><blockquote><img src = "MongoDB运维实战/71472ad24b1bf0354fa776814b10604a.png"></blockquote></li><li><h3>Read Concern</h3><blockquote><img src = "MongoDB运维实战/2d229628b445e4ab8a4c2e76da49a636.png"></blockquote></li></ul>
</li></ul>
</li><li><h3>3 运维实战 故障案例分析</h3><blockquote><img src = "MongoDB运维实战/c61d7765ccaa12d797e7743a731a9091.png"></blockquote><ul><li><h3>3.1 调整oplog大小引发从库宕机</h3><blockquote><img src = "MongoDB运维实战/79d4cedc05a4a9db0cb7649f995563d3.png"></blockquote><ul><li><h3>原因和解决方案</h3><blockquote><img src = "MongoDB运维实战/4bf36ddf488dd48cc74e79006416ab43.png"></blockquote></li></ul>
</li><li><h3>3.2 hotbackup报错</h3><blockquote><img src = "MongoDB运维实战/b308f6919f3d7d76ca6f3dec39dafc01.png"></blockquote><ul><li><h3>原因和解决方案</h3><blockquote><img src = "MongoDB运维实战/49c45b83f5dfa4e066cd6088ad242136.png"></blockquote></li></ul>
</li><li><h3>3.3 MongoDB最大连接数限制</h3><blockquote><img src = "MongoDB运维实战/1bac76ade0bbad45d99ea2848a0b0ddd.png"></blockquote><ul><li><h3>原因</h3><blockquote><img src = "MongoDB运维实战/c682ecc23d824022674e990673bcb004.png"></blockquote></li><li><h3>解决办法</h3><blockquote><img src = "MongoDB运维实战/3da2e1bfd8a43109b06348521fb3c66d.png"></blockquote></li></ul>
</li><li><h3>3.4 MongoDB启动失败</h3><blockquote><img src = "MongoDB运维实战/28f6c701885fc7a5c37814b1e28b6060.png"></blockquote><ul><li><h3>原因</h3><blockquote><img src = "MongoDB运维实战/1016d3f4330fe86fbae28f0e602e843b.png"></blockquote></li><li><h3>解决办法</h3><blockquote><img src = "MongoDB运维实战/d8a3c7e1fd8e80d18b10cd13f3167ede.png"></blockquote></li></ul>
</li><li><h3>3.5 Mongos 异常宕机</h3><blockquote><img src = "MongoDB运维实战/015e980babdafdc0a177dc75f326d036.png"></blockquote><ul><li><h3>原因和解决方案</h3><blockquote><img src = "MongoDB运维实战/b3bc64982fb7e0f1b0def0f2fc8e5ad4.png"></blockquote></li></ul>
</li><li><h3>3.6 sharding集群执行sh.stopBalancer()命令卡住</h3><blockquote><img src = "MongoDB运维实战/b2e1e78507654d2662bc207ea302a97b.png"></blockquote><ul><li><h3>原因</h3><blockquote><img src = "MongoDB运维实战/11bf75ca75a488d019af8b4752ade1f5.png"></blockquote></li><li><h3>解决方案</h3><blockquote><img src = "MongoDB运维实战/ff06aff6354634f718961e6fa499f42f.png"></blockquote></li></ul>
</li><li><h3>3.7 Remove shard失败</h3><blockquote><img src = "MongoDB运维实战/8e3acb68ae8b15e2a323bd06ff4cf81a.png"></blockquote><ul><li><h3>解决方案</h3><blockquote><img src = "MongoDB运维实战/ac1b838e42b085915c42cd5162fe4933.png"></blockquote></li></ul>
</li><li><h3>3.8 move chunk aborted</h3><blockquote><img src = "MongoDB运维实战/1cb5532a5fdbcb5734bcf628037f0b7d.png"></blockquote></li><li><h3>3.9 迁移引发的性能抖动</h3><blockquote><img src = "MongoDB运维实战/ea63af26e69962b7cce715b44e3bbc55.png"></blockquote><ul><li><h3>解决方案</h3><blockquote><img src = "MongoDB运维实战/d3b81b7ee3e671a561e895afa658d6ef.png"></blockquote></li></ul>
</li><li><h3>3.10 Mongos连接数异常</h3><blockquote><img src = "MongoDB运维实战/08443a30df36d7ba2cd4f1d92c46061b.png"></blockquote><ul><li><h3>解决方案</h3><blockquote><img src = "MongoDB运维实战/675cd1ecb46bc4209e6136040b0dd62e.png"></blockquote></li></ul>
</li><li><h3>3.11 rs.add时报错operation exceeded time limit</h3><blockquote><img src = "MongoDB运维实战/2df5475ced4c2c608bdb5f9da108b5d8.png"></blockquote><ul><li><h3>解决方案</h3><blockquote><img src = "MongoDB运维实战/143f0d8b638757218d24089e50593914.png"></blockquote></li></ul>
</li><li><h3>3.12 副本集延迟突然增大到上万秒</h3><blockquote><img src = "MongoDB运维实战/fb165b3bdb10c7c74d6c225dccffdbdf.png"></blockquote><ul><li><h3>原因和解决方案</h3><blockquote><img src = "MongoDB运维实战/895461c67d6779f145b5ca5eb1609484.png"></blockquote></li></ul>
</li><li><h3>3.13 升级发现Info Message异常</h3><blockquote><img src = "MongoDB运维实战/15ce6330d5e7391b49c8bc1caf5f15c1.png"></blockquote><ul><li><h3>原因</h3><blockquote><img src = "MongoDB运维实战/386ee8a492cd7bc9b0c7213b373baa27.png"></blockquote></li></ul>
</li><li><h3>3.14 对已存在的集合shardcollection失败</h3><blockquote><img src = "MongoDB运维实战/0fd9c00e9720f7c12571ddd140683f79.png"></blockquote><ul><li><h3>原因分析</h3><blockquote><img src = "MongoDB运维实战/f4a0e748dc2eaf7a86be98b330c33119.png"></blockquote></li></ul>
</li><li><h3>3.15 operation exceeded time limit</h3><blockquote><img src = "MongoDB运维实战/f293256aea65fe029783160b382fef1f.png"></blockquote><ul><li><h3>原因和解决方案</h3><blockquote><img src = "MongoDB运维实战/7175ad5e793812b869699fe553351f1f.png"></blockquote></li></ul>
</li><li><h3>3.16 强制重新配置副本集</h3><blockquote><img src = "MongoDB运维实战/ad0e92979c2a617ccf6e107773515fe9.png"></blockquote></li><li><h3>3.17 create index oom</h3><blockquote><img src = "MongoDB运维实战/9154d47f1e537c4a6024ff7ac1fab87d.png"></blockquote></li><li><h3>3.18 rs.remove导致从节点crash</h3><blockquote><img src = "MongoDB运维实战/e3894ef034e10cd36b1a257b5570f5a0.png"></blockquote></li></ul>
</li><li><h3>4 性能调优</h3><blockquote><img src = "MongoDB运维实战/0a28151e5392400a4d56fce106eadea5.png"></blockquote><ul><li><h3>4.1 机器负载高</h3><blockquote><img src = "MongoDB运维实战/97cb8112ec9cc78e42c65a2a342c72af.png"></blockquote><ul><li><h3>原因和解决方案</h3><blockquote><img src = "MongoDB运维实战/5cc26fdf46a29af60d6babac019d0cbb.png"></blockquote></li></ul>
</li><li><h3>4.2 快速修改库名</h3><blockquote><img src = "MongoDB运维实战/0604cc7746415dfb4b88173442fdeeb6.png"></blockquote><ul><li><h3>解决办法</h3><blockquote><img src = "MongoDB运维实战/adf9d21993c5a24b52b6ffafc40d230f.png"></blockquote></li></ul>
</li><li><h3>4.3 dbhash检查一致性</h3><blockquote><img src = "MongoDB运维实战/d0295b67d7a21f24736dc39f06fc195b.png"></blockquote></li><li><h3>4.4 使用索引却依旧性能低下</h3><blockquote><img src = "MongoDB运维实战/ee3247a900a1736a42095464a06a3693.png"></blockquote><ul><li><h3>原因和解决方案</h3><blockquote><img src = "MongoDB运维实战/323a30964547bf382ba53c76e2970f39.png"></blockquote></li></ul>
</li><li><h3>4.5 索引</h3><blockquote><img src = "MongoDB运维实战/2ed543faa89c408688499bba66a86d00.png"></blockquote><ul><li><h3>4.5.1 单列索引</h3><blockquote><img src = "MongoDB运维实战/1562382071a0484d655192907d1f3c34.png"></blockquote><ul><li><h3>单个字段创建升序索引</h3><blockquote><img src = "MongoDB运维实战/eac1d6603569b2f8a58fc05932b6ed3e.png"></blockquote></li><li><h3>在嵌入字段上创建索引</h3><blockquote><img src = "MongoDB运维实战/53b1dc96d2560758e072cb8dad268f8f.png"></blockquote></li><li><h3>在嵌入式文档上创建索引</h3><blockquote><img src = "MongoDB运维实战/3c588532d6397751e696fc79dd42020c.png"></blockquote></li></ul>
</li><li><h3>4.5.2 复合索引</h3><blockquote><img src = "MongoDB运维实战/ec538748b156630fa67039881ae56300.png"></blockquote><ul><li><h3>创建复合索引</h3><blockquote><img src = "MongoDB运维实战/dca7fdf4b5c5309e9f38b0d322c8aa66.png"></blockquote></li><li><h3>复合索引的排序</h3><blockquote><img src = "MongoDB运维实战/299a79b35ca158eb631ec7bbd7247918.png"></blockquote></li><li><h3>最左前缀原则</h3><blockquote><img src = "MongoDB运维实战/15cc54013a58316d25f43f3e3c651b9d.png"></blockquote></li></ul>
</li><li><h3>4.5.3 多键索引</h3><blockquote><img src = "MongoDB运维实战/ae13bbee4f34de8fdfd27b2e12702603.png"></blockquote><ul><li><h3>索引界限</h3><blockquote><img src = "MongoDB运维实战/852aeb6a19160332c85db8d61b5312c5.png"></blockquote></li><li><h3>多键唯一索引</h3><blockquote><img src = "MongoDB运维实战/e30e8f043a07e3b5462d57e57843444b.png"></blockquote></li><li><h3>限制</h3><blockquote><img src = "MongoDB运维实战/2d66526f1fbcde4451c444196d3bde83.png"></blockquote></li><li><h3>分片&哈希索引&覆盖查询&在数组上的查询表现</h3><blockquote><img src = "MongoDB运维实战/d8f88f581f1d3901a869bc7490390870.png"></blockquote></li></ul>
</li><li><h3>4.5.4 文本索引</h3><blockquote><img src = "MongoDB运维实战/b0ec4ef1c32ef931d24c02daadf87e74.png"></blockquote></li><li><h3>4.5.5 2dshpere索引</h3><blockquote><img src = "MongoDB运维实战/1414686aa2285010310a67720f71b33a.png"></blockquote><ul><li><h3>geoNear</h3><blockquote><img src = "MongoDB运维实战/4daf6c5f18f53b19cdb36a987506802b.png"></blockquote></li><li><h3>shard key限制</h3><blockquote><img src = "MongoDB运维实战/8b6f6553791f2f3458ea1645b75ebf57.png"></blockquote></li></ul>
</li><li><h3>4.5.6 2d索引</h3><blockquote><img src = "MongoDB运维实战/08d01fb9ef292751c002e2a5c2f9059a.png"></blockquote><ul><li><h3>geoNear</h3><blockquote><img src = "MongoDB运维实战/a294a1325f5e188fe4e3f9a8e09fc2a1.png"></blockquote></li><li><h3>表现&稀疏</h3><blockquote><img src = "MongoDB运维实战/15c911cafb07b736113c6f7db672899a.png"></blockquote></li></ul>
</li><li><h3>4.5.7 Hash索引</h3><blockquote><img src = "MongoDB运维实战/fd1d56f018a34961386d5112d5cabb1d.png"></blockquote></li><li><h3>4.5.8 一条SQL创建多个索引</h3><blockquote><img src = "MongoDB运维实战/124dc403d234d3cdd4cf5eaa96562da6.png"></blockquote></li></ul>
</li><li><h3>4.6 属性索引</h3><blockquote><img src = "MongoDB运维实战/40dea9abf532d645d3429825149dfef4.png"></blockquote><ul><li><h3>4.6.1 TTL索引</h3><blockquote><img src = "MongoDB运维实战/68b2644d252a25ab5d30edc7592236ae.png"></blockquote><ul><li><h3>TTL适用场景</h3><blockquote><img src = "MongoDB运维实战/4d09bf2df15c0bf8f1fa362e2599a5a9.png"></blockquote></li></ul>
</li><li><h3>4.6.2 唯一索引</h3><blockquote><img src = "MongoDB运维实战/e6c99f829bc840ac733d4e4545302684.png"></blockquote><ul><li><h3>创建唯一索引</h3><blockquote><img src = "MongoDB运维实战/9797960f5fd16ee72b358205f6dab24c.png"></blockquote></li><li><h3>限制</h3><blockquote><img src = "MongoDB运维实战/8830b1ed2188726a1789f6cbbd3a3f11.png"></blockquote></li><li><h3>唯一索引对缺失列的处理</h3><blockquote><img src = "MongoDB运维实战/a77ac93633b20ac42719c8730c8b5ce2.png"></blockquote></li></ul>
</li><li><h3>4.6.3 部分索引</h3><blockquote><img src = "MongoDB运维实战/c83a6f03e9c7d4a0962c15010ffb5896.png"></blockquote><ul><li><h3>创建部分索引</h3><blockquote><img src = "MongoDB运维实战/7192ced41dd127ab394d28d6d6767da7.png"></blockquote></li><li><h3>限制</h3><blockquote><img src = "MongoDB运维实战/9865f7a5673ae9dac74407974243412d.png"></blockquote></li></ul>
</li><li><h3>4.6.4 稀疏索引</h3><blockquote><img src = "MongoDB运维实战/26cbe0cac7a76916d47a55453feedad8.png"></blockquote><ul><li><h3>创建稀疏索引&不完整结果</h3><blockquote><img src = "MongoDB运维实战/4821b5ced31da2185e2dafbac9f13641.png"></blockquote></li><li><h3>稀疏符合索引&稀疏唯一索引</h3><blockquote><img src = "MongoDB运维实战/09faef3750a79bbddbdf83b666e38d90.png"></blockquote></li></ul>
</li></ul>
</li><li><h3>4.7 在大集合上创建索引</h3><blockquote><img src = "MongoDB运维实战/1e01a50b429e6e9e26e3597e17b96e2e.png"></blockquote><ul><li><h3>性能表现</h3><blockquote><img src = "MongoDB运维实战/1515cdad883de85363aac585d0859eff.png"></blockquote></li><li><h3>创建索引时中断</h3><blockquote><img src = "MongoDB运维实战/e06d4fc49a4c342aea0f27b35e6bdf05.png"></blockquote></li></ul>
</li><li><h3>4.8 索引交集</h3><blockquote><img src = "MongoDB运维实战/14f3d5f6f05c169da465091cdf91997b.png"></blockquote><ul><li><h3>复合索引的索引交集</h3><blockquote><img src = "MongoDB运维实战/3d52b8032aeab26b3b9be57e53448202.png"></blockquote></li><li><h3>索引交集与sort</h3><blockquote><img src = "MongoDB运维实战/2b1300d047e727bd055584f5c01b0406.png"></blockquote></li></ul>
</li><li><h3>4.9 索引排序</h3><blockquote><img src = "MongoDB运维实战/6adef3b17349c204f4267e59f0d73de9.png"></blockquote><ul><li><h3>多列排序</h3><blockquote><img src = "MongoDB运维实战/7d8a47df9e922b4ec8b9a6c4fae79aff.png"></blockquote></li><li><h3>最左前缀</h3><blockquote><img src = "MongoDB运维实战/8fdd374b29b0074d21881bbc3df9ce8f.png"></blockquote></li><li><h3>非最左前缀</h3><blockquote><img src = "MongoDB运维实战/adac332faebb42dd97b812928c495da8.png"></blockquote></li></ul>
</li><li><h3>4.10 查询计划</h3><blockquote><img src = "MongoDB运维实战/b524ef599e3fb478d1de659a21498c2c.png"></blockquote></li><li><h3>4.11 system profile</h3><blockquote><img src = "MongoDB运维实战/def04016355ed2ea886cd12c892fa7da.png"></blockquote></li><li><h3>4.12 Profile操作相关</h3><blockquote><img src = "MongoDB运维实战/79ced14ad674c057027d8c7985024ff8.png"></blockquote></li></ul>
</li><li><h3>5 备份与恢复</h3><blockquote><img src = "MongoDB运维实战/9e01c097c6da8fc21aa794ad657ac0a0.png"></blockquote><ul><li><h3>5.1 逻辑备份</h3><blockquote><img src = "MongoDB运维实战/f554cfe0d55ed3a1ecabf279d4603fe8.png"></blockquote></li><li><h3>5.2 Oplog Replay</h3><blockquote><img src = "MongoDB运维实战/8801e09842d34d71dd2833333fc15842.png"></blockquote></li><li><h3>5.3 物理备份</h3><blockquote><img src = "MongoDB运维实战/5de59756cfa431469e07494be6a67914.png"></blockquote></li></ul>
</li><li><h3>6 高可用架构集群管理</h3><blockquote><img src = "MongoDB运维实战/a35c3d9ebf5bc1ea6c5d93fcaa74d88c.png"></blockquote><ul><li><h3>6.1 副本集</h3><blockquote><img src = "MongoDB运维实战/d9f5bff6dcc9bb8d5963bf291046324e.png"></blockquote><ul><li><h3>6.1.1 冗余和数据可用性</h3><blockquote><img src = "MongoDB运维实战/585f60d6e97a3145adcff2f0177e8ccb.png"></blockquote></li><li><h3>6.1.2 MongoDB中的副本集</h3><blockquote><img src = "MongoDB运维实战/c441dfde449dd8925735f3c8d1b4d72a.png"></blockquote></li><li><h3>6.1.3 自动故障转移</h3><blockquote><img src = "MongoDB运维实战/abb9e095585316509d6d62ed04551b11.png"></blockquote></li><li><h3>6.1.4 关于MongoDB的读操作</h3><blockquote><img src = "MongoDB运维实战/87ffa699f8cc101510d79bf015132b27.png"></blockquote></li></ul>
</li><li><h3>6.2 副本集成员状态</h3><blockquote><img src = "MongoDB运维实战/b9e1d6f056e758eeea52e7a0491ee48d.png"></blockquote></li><li><h3>6.3 副本集原理</h3><blockquote><img src = "MongoDB运维实战/e97274c957ff20613b88e5fb95b50b29.png"></blockquote></li><li><h3>6.4 复制集成员</h3><blockquote><img src = "MongoDB运维实战/f88b498d76f153f4e52a53c199643b7f.png"></blockquote><ul><li><h3>Primary</h3><blockquote><img src = "MongoDB运维实战/b6db61860730e87bfd7b93dc94533db3.png"></blockquote></li><li><h3>Secondaries</h3><blockquote><img src = "MongoDB运维实战/bcc3c4b5ec7ce5acfe68713e450115ce.png"></blockquote></li></ul>
</li><li><h3>6.5 复制集成员类型</h3><blockquote><img src = "MongoDB运维实战/5f8c3f4e83932cd854b552c832211430.png"></blockquote><ul><li><h3>Arbiter</h3><blockquote><img src = "MongoDB运维实战/2c6544ee5adca3b5b18e47bf8a11cccb.png"></blockquote></li><li><h3>Vote0</h3><blockquote><img src = "MongoDB运维实战/87beaf3dc527641ee674c612753542a4.png"></blockquote></li><li><h3>Hidden</h3><blockquote><img src = "MongoDB运维实战/919343160207738dea9879679a5248a5.png"></blockquote></li><li><h3>Delayed</h3><blockquote><img src = "MongoDB运维实战/b7bddc146226a1514439c0375903d09f.png"></blockquote></li><li><h3>副本集rollback过程</h3><blockquote><img src = "MongoDB运维实战/df7f2448a36de7d8d7f2d477513c1d12.png"></blockquote></li></ul>
</li><li><h3>6.6 副本集中的主库</h3><blockquote><img src = "MongoDB运维实战/271f87e076f9e244aa2e9209d60c8be3.png"></blockquote></li><li><h3>6.7 副本集中的从库</h3><blockquote><img src = "MongoDB运维实战/bcea76632f87e2972eea316d54c89de4.png"></blockquote><ul><li><h3>6.7.1 Priority 0从库</h3><blockquote><img src = "MongoDB运维实战/b5f23315667dfb202f543c9acee4585d.png"></blockquote><ul><li><h3>优先级为0的成员一般作为备用</h3><blockquote><img src = "MongoDB运维实战/c9eefac0513015df7a9275bd8135a4e7.png"></blockquote></li><li><h3>故障转移注意事项</h3><blockquote><img src = "MongoDB运维实战/f980694843daf5aca5f95a0bb8484b0e.png"></blockquote></li></ul>
</li><li><h3>6.7.2 hidden从库</h3><blockquote><img src = "MongoDB运维实战/9003f967130d772e35af86dd7463e0f3.png"></blockquote></li><li><h3>6.7.3 延迟从库</h3><blockquote><img src = "MongoDB运维实战/1e9392839adce7ea07acfd396cd758e6.png"></blockquote></li></ul>
</li><li><h3>6.8 oplog简介</h3><blockquote><img src = "MongoDB运维实战/01f1296e25bc5e871d0867a895df5fd0.png"></blockquote></li><li><h3>6.9 oplog过滤</h3><blockquote><img src = "MongoDB运维实战/51244c4fe23dde0e15632dcbe0ab951d.png"></blockquote></li><li><h3>6.10 副本集的数据复制</h3><blockquote><img src = "MongoDB运维实战/21e3a853f267ee69511eb3bb28efa4d2.png"></blockquote><ul><li><h3>初始化同步</h3><blockquote><img src = "MongoDB运维实战/3e26f625a7692356b2eac1e40f1ca01d.png"></blockquote></li><li><h3>初始化同步中改集合名</h3><blockquote><img src = "MongoDB运维实战/9b6ed42109c6b920d2ce5fc1be147a7e.png"></blockquote></li><li><h3>复制</h3><blockquote><img src = "MongoDB运维实战/684f95cea5772ecda50d48d5181cd19d.png"></blockquote></li><li><h3>多线程复制</h3><blockquote><img src = "MongoDB运维实战/8b020865c94c5131a43431ef6b9cd14f.png"></blockquote></li></ul>
</li><li><h3>6.11 3节点最小副本集架构</h3><blockquote><img src = "MongoDB运维实战/fb4c6dd09c3241ec866820aad2182561.png"></blockquote><ul><li><h3>Primary+2Secondary架构</h3><blockquote><img src = "MongoDB运维实战/2f728ef6b09a7b6f3d565543c254fc8a.png"></blockquote></li><li><h3>Primary+Secondary+Arbiter架构</h3><blockquote><img src = "MongoDB运维实战/ee82a7c4563eda18f022351f5f4135d6.png"></blockquote></li></ul>
</li><li><h3>6.12 副本集的选举</h3><blockquote><img src = "MongoDB运维实战/174b27313989acb3e892a01d19c53751.png"></blockquote><ul><li><h3>选举</h3><blockquote><img src = "MongoDB运维实战/eaabc094d0b047209727369459645bb5.png"></blockquote></li><li><h3>非投票节点</h3><blockquote><img src = "MongoDB运维实战/73a99ccc2eea75d63094e0a1266a050b.png"></blockquote></li><li><h3>6.12.1 writeConcern</h3><blockquote><img src = "MongoDB运维实战/0c82bc934bbe3f22c39bce74365ae718.png"></blockquote></li><li><h3>6.12.2 Read Preference</h3><blockquote><img src = "MongoDB运维实战/e74fff3e580c55efddd205bd99f36cc4.png"></blockquote><ul><li><h3>解释</h3><blockquote><img src = "MongoDB运维实战/fc333495ff9251b83f1d80e474bcd6f9.png"></blockquote></li><li><h3>maxStalenessSeconds</h3><blockquote><img src = "MongoDB运维实战/b513a95a50f4a4be0b3fa3beba69ef50.png"></blockquote></li></ul>
</li></ul>
</li><li><h3>6.13 副本集环境搭建</h3><blockquote><img src = "MongoDB运维实战/13ac87afb00be79eeed6c5a1e17acc43.png"></blockquote></li><li><h3>6.14 配置延迟</h3><blockquote><img src = "MongoDB运维实战/3e0106d66f7170210205830d18aa4595.png"></blockquote></li><li><h3>6.15 从2.6升级到3.0版本</h3><blockquote><img src = "MongoDB运维实战/d841ef41faad681d38be397122ceded0.png"></blockquote><ul><li><h3>6.15.1 升级过程</h3><blockquote><img src = "MongoDB运维实战/a3ee8fbb33268f45a7ccdda881890e14.png"></blockquote></li><li><h3>6.15.2 关于认证</h3><blockquote><img src = "MongoDB运维实战/b8809c6a91c1c32c598da11aee61eb1f.png"></blockquote></li><li><h3>6.15.3 变更存储引擎</h3><blockquote><img src = "MongoDB运维实战/f767574fa0d06fd1f91f93895be8b398.png"></blockquote></li><li><h3>6.15.4 Dricver兼容性</h3><blockquote><img src = "MongoDB运维实战/0b855c7fafc2f10405f9d0c97adef512.png"></blockquote></li></ul>
</li><li><h3>6.16 从3.2版本升级至3.4版本</h3><blockquote><img src = "MongoDB运维实战/111675260067edc9dd3f05f540d8696d.png"></blockquote><ul><li><h3>6.16.1 升级过程</h3><blockquote><img src = "MongoDB运维实战/b3328d3aa210d252994109617cedccdb.png"></blockquote></li><li><h3>6.16.2 启用不向下兼容3.4版本功能</h3><blockquote><img src = "MongoDB运维实战/295a7b2e0849a1a99b1aa7ea2d06e9ff.png"></blockquote></li><li><h3>6.16.3 升级发现infoMessage异常</h3><blockquote><img src = "MongoDB运维实战/49e6d94cbebfca331677da62d1bcb342.png"></blockquote></li></ul>
</li><li><h3>6.17 分片</h3><blockquote><img src = "MongoDB运维实战/afd699a43d0b2c9a6a255f81cf9ca372.png"></blockquote><ul><li><h3>ShardKeys</h3><blockquote><img src = "MongoDB运维实战/3e5b25b97aba8c635fa4e177f8e45205.png"></blockquote></li><li><h3>Chunks</h3><blockquote><img src = "MongoDB运维实战/50eb4cb6ecf3c1c2acfd0adfc816944c.png"></blockquote></li><li><h3>6.17.1 分片和非分片集合</h3><blockquote><img src = "MongoDB运维实战/300a3ba6b65e8a5adbe4e3a226082535.png"></blockquote><ul><li><h3>连接到分片集群</h3><blockquote><img src = "MongoDB运维实战/ce50cc01525a0aa387abab4b2c443cbf.png"></blockquote></li><li><h3>分片策略</h3><blockquote><img src = "MongoDB运维实战/3eafa531c1461eecf155d3e0fc8ee388.png"></blockquote></li><li><h3>Shard集群中的zone</h3><blockquote><img src = "MongoDB运维实战/50cb22e169b92404235f98c372c72162.png"></blockquote></li></ul>
</li><li><h3>6.17.2 Sharding组建</h3><blockquote><img src = "MongoDB运维实战/14475f3c2f9b96f1240cfcbdb8d9a7b3.png"></blockquote><ul><li><h3>mongos</h3><blockquote><img src = "MongoDB运维实战/b0f8c7a77f3c536a8e83983fe621a656.png"></blockquote></li></ul>
</li><li><h3>6.17.3 Shard</h3><blockquote><img src = "MongoDB运维实战/3231f9f71f93b236f6729e615c9700b0.png"></blockquote><ul><li><h3>Primary Shard</h3><blockquote><img src = "MongoDB运维实战/da036394de334fc6bea28ebf0efdc576.png"></blockquote></li><li><h3>shard status</h3><blockquote><img src = "MongoDB运维实战/b3a1ec485590bfdeaab472a2a924a55a.png"></blockquote></li></ul>
</li><li><h3>6.17.4 Config Server</h3><blockquote><img src = "MongoDB运维实战/7f1e85542e88fa3d1310e02511fa4729.png"></blockquote><ul><li><h3>Reploca Set Config Servers</h3><blockquote><img src = "MongoDB运维实战/e7252fcea4d672c70197b1b1f7338928.png"></blockquote></li><li><h3> Config Server 上的读写操作</h3><blockquote><img src = "MongoDB运维实战/66f202a5bc89a919cb89f80f440f5971.png"></blockquote></li><li><h3>config server的可用性</h3><blockquote><img src = "MongoDB运维实战/6679613e63d8f009b6ec9d49313ba959.png"></blockquote></li><li><h3>Sharded Cluster Metadata</h3><blockquote><img src = "MongoDB运维实战/438c47b3454fe7f2cedc5d2b88728cd8.png"></blockquote></li></ul>
</li><li><h3>6.17.5 mongos</h3><blockquote><img src = "MongoDB运维实战/24c1e73067b044bda88ccc499259f2cc.png"></blockquote><ul><li><h3>mongos的路由和结果</h3><blockquote><img src = "MongoDB运维实战/22db8e2d8e899e38aba8a64509315885.png"></blockquote></li><li><h3>mongos如何处理查询模型</h3><blockquote><img src = "MongoDB运维实战/a9552074904fbcb8286eef6732de665e.png"></blockquote></li></ul>
</li><li><h3>6.17.6 Shard Keys</h3><blockquote><img src = "MongoDB运维实战/53ae78935bad407750cb4f007790cf70.png"></blockquote><ul><li><h3>指定shard key</h3><blockquote><img src = "MongoDB运维实战/eaa13859ee90adc49542c0fe6d22ccb5.png"></blockquote></li><li><h3>shard key index</h3><blockquote><img src = "MongoDB运维实战/70e9f7be010d885db2fd38e81c237c8f.png"></blockquote></li><li><h3>unique index</h3><blockquote><img src = "MongoDB运维实战/dc4fbf88294cdbe52fe8fe312c853117.png"></blockquote></li><li><h3>选择一个shard key</h3><blockquote><img src = "MongoDB运维实战/ce6eb461dc5ae01c042662b2a52fc48a.png"></blockquote></li><li><h3>shard key的基数</h3><blockquote><img src = "MongoDB运维实战/d81ec2c9fb5a89d9b9cb8b14c096739c.png"></blockquote></li><li><h3>shard key的频率</h3><blockquote><img src = "MongoDB运维实战/c8aea6ba8e224fea39c2771fcce2978a.png"></blockquote></li><li><h3>shard key单调递增或递减</h3><blockquote><img src = "MongoDB运维实战/73be12f40aec51f2c49b42abc3017153.png"></blockquote></li></ul>
</li><li><h3>6.17.7 哈希分片</h3><blockquote><img src = "MongoDB运维实战/051078b6f61b479872140b43a6870221.png"></blockquote><ul><li><h3>Hash sharding key</h3><blockquote><img src = "MongoDB运维实战/8710dc33eefeb8518e321d8673a5e14d.png"></blockquote></li><li><h3>将集合进行Hash分片</h3><blockquote><img src = "MongoDB运维实战/bb48b5f970bf22822e10c0607647f236.png"></blockquote></li></ul>
</li><li><h3>6.17.8 范围分片</h3><blockquote><img src = "MongoDB运维实战/a32c312ffa4cf17701747d0cffc0093f.png"></blockquote><ul><li><h3>Shard Key选择</h3><blockquote><img src = "MongoDB运维实战/c178bb9d70955e732b23b6315cd436d7.png"></blockquote></li><li><h3>将集合进行Hash分片</h3><blockquote><img src = "MongoDB运维实战/3a369bda3de663a710ef3e12e33c3688.png"></blockquote></li></ul>
</li><li><h3>6.17.9 Zone</h3><blockquote><img src = "MongoDB运维实战/ab765fa44cb6900e84ea0093c1d958ca.png"></blockquote><ul><li><h3>zone功能体现&balancer&shardkey</h3><blockquote><img src = "MongoDB运维实战/1fb746b3d199ec2f7bb511a5073987c5.png"></blockquote></li></ul>
</li><li><h3>6.17.10 zone常用命令</h3><blockquote><img src = "MongoDB运维实战/4b0d81b0b0b01d5f2ca5f164af80b083.png"></blockquote></li><li><h3>6.17.11 Chunk</h3><blockquote><img src = "MongoDB运维实战/12a39548300d8fa8f22c1bc027bf564f.png"></blockquote><ul><li><h3>Chunk Split</h3><blockquote><img src = "MongoDB运维实战/020dab4dcdf08a78d7df2194902290a9.png"></blockquote></li><li><h3>Chunk迁移& balancer</h3><blockquote><img src = "MongoDB运维实战/c8f282ad8881bfca5e7a002ba3925a94.png"></blockquote></li></ul>
</li><li><h3>6.17.12 Chunk迁移</h3><blockquote><img src = "MongoDB运维实战/56e0402be37af17aaf9471d109d28ea6.png"></blockquote></li><li><h3>6.17.13 chunksize</h3><blockquote><img src = "MongoDB运维实战/5f54f7843799ea8f279e336ef22f0975.png"></blockquote><ul><li><h3>jumbo chunk</h3><blockquote><img src = "MongoDB运维实战/4576030c9ff738ce740eb1f3f23245f0.png"></blockquote></li></ul>
</li><li><h3>6.17.14 Balancer</h3><blockquote><img src = "MongoDB运维实战/3eead30e6ec3a0ed474101a2dd6112e5.png"></blockquote></li><li><h3>6.17.15 Balancer运维</h3><blockquote><img src = "MongoDB运维实战/a029ed3a996236420adc73c87072f27d.png"></blockquote></li></ul>
</li><li><h3>6.18 Troubleshoot Sharded Clusters</h3><blockquote><img src = "MongoDB运维实战/495f7897a7a42d30b5929b97080a389e.png"></blockquote></li><li><h3>6.19 在线开启认证</h3><blockquote><img src = "MongoDB运维实战/1daff42e059ab3da491332a65f81460f.png"></blockquote></li><li><h3>6.20 分片搭建</h3><blockquote><img src = "MongoDB运维实战/b61e5a0991849e66665feb433938eb4d.png"></blockquote></li></ul>
</li><li><h3>7 监控</h3><blockquote><img src = "MongoDB运维实战/eefa0090fd10b68cd8794e0319670714.png"></blockquote><ul><li><h3>7.1 PMM监控MongoDB</h3><blockquote><img src = "MongoDB运维实战/911a5ee62cd9286c0e2fd5bc32bcbc84.png"></blockquote></li><li><h3>7.2 Server组件</h3><blockquote><img src = "MongoDB运维实战/9656e9df2ac53a06b510ec42bb3543b8.png"></blockquote></li><li><h3>7.3 客户端组件</h3><blockquote><img src = "MongoDB运维实战/02646e6906fc155ca7e01c9b2d8c7155.png"></blockquote></li></ul>
</li><li><h3>8 常用指令</h3><blockquote><img src = "MongoDB运维实战/df9baf5b976091056066dc9385209754.png"></blockquote><ul><li><h3>8.1 查询</h3><blockquote><img src = "MongoDB运维实战/cbbd94ec4a3134f6f3c6048f967b677a.png"></blockquote></li><li><h3>8.2 插入</h3><blockquote><img src = "MongoDB运维实战/efeb8f3010fad54d60c4e147e614d799.png"></blockquote></li><li><h3>8.3 修改</h3><blockquote><img src = "MongoDB运维实战/2ca93e91b753a1c644298fe3b2c6978e.png"></blockquote></li><li><h3>8.4 删除</h3><blockquote><img src = "MongoDB运维实战/7aff758e39c4b97f88eb2b235c3e8453.png"></blockquote></li><li><h3>8.5 分片集群常用命令</h3><blockquote><img src = "MongoDB运维实战/ed349469abce07bfd6aec7c2355e0c7a.png"></blockquote></li></ul>
</li></ul>
<footer><div style = "background: #e5e6e8; height: 1px; margin-bottom: 20px;"></div>
<div style = "text-align:center; "><a target="_blank" href="http://www.bookxnote.com">&copy2018-2020 BookxNote</a></div></footer>
</body>
</html>
